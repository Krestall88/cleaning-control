# Логика редиректа после входа

## Обзор

После успешного входа в систему пользователи перенаправляются на разные страницы в зависимости от их роли.

## Роли и страницы

### 1. Менеджеры (`MANAGER` и `SENIOR_MANAGER`)
**Страница:** `/objects` (Объекты)

**Причина:** Менеджеры работают с объектами клининга, поэтому им сразу показывается список объектов для быстрого доступа к своим задачам.

**Роли:**
- `MANAGER` - обычный менеджер
- `SENIOR_MANAGER` - старший менеджер

### 2. Бухгалтер (`ACCOUNTANT`)
**Страница:** `/inventory` (Инвентарь)

**Причина:** Бухгалтер работает с инвентарем и финансовыми данными, поэтому ему показывается страница инвентаря.

**Роль:**
- `ACCOUNTANT` - бухгалтер

### 3. Администраторы (`ADMIN`, `DEPUTY`, `DEPUTY_ADMIN`)
**Страница:** `/` (Дашборд)

**Причина:** Администраторы имеют доступ ко всем функциям системы, поэтому им показывается главный дашборд с общей статистикой и быстрым доступом ко всем разделам.

**Роли:**
- `ADMIN` - администратор
- `DEPUTY` - заместитель
- `DEPUTY_ADMIN` - заместитель администратора

## Реализация

### Файлы с логикой редиректа

1. **`src/app/auth/login/page.tsx`** (основная страница входа)
2. **`src/app/login/page.tsx`** (альтернативная страница входа)

### Код логики

```typescript
// Редирект в зависимости от роли
if (data.user.role === 'MANAGER' || data.user.role === 'SENIOR_MANAGER') {
  router.push('/objects'); // Менеджеры и старшие менеджеры → Объекты
} else if (data.user.role === 'ACCOUNTANT') {
  router.push('/inventory'); // Бухгалтер → Инвентарь
} else {
  router.push('/'); // Админ, зам админа и зам → Дашборд
}
```

## Таблица редиректов

| Роль | Название | Страница после входа | URL |
|------|----------|---------------------|-----|
| `MANAGER` | Менеджер | Объекты | `/objects` |
| `SENIOR_MANAGER` | Старший менеджер | Объекты | `/objects` |
| `ACCOUNTANT` | Бухгалтер | Инвентарь | `/inventory` |
| `ADMIN` | Администратор | Дашборд | `/` |
| `DEPUTY` | Заместитель | Дашборд | `/` |
| `DEPUTY_ADMIN` | Зам. администратора | Дашборд | `/` |
| `CLIENT` | Клиент | Дашборд | `/` |

## Тестовые пользователи

На странице входа есть кнопки быстрого входа для тестирования:

1. **Администратор** (`admin@example.com`) → Дашборд
2. **Зам. администратора** (`deputy@example.com`) → Дашборд
3. **Бухгалтер** (`accountant@example.com`) → Инвентарь
4. **Менеджер 1** (`manager1@example.com`) → Объекты
5. **Менеджер 2** (`manager2@example.com`) → Объекты

Все пароли: `password123`

## История изменений

### До исправления
- ❌ Бухгалтер шел на дашборд вместо инвентаря (в `/auth/login`)
- ❌ Старшие менеджеры не учитывались в логике редиректа
- ❌ Разная логика в двух страницах входа

### После исправления
- ✅ Бухгалтер идет на `/inventory`
- ✅ Старшие менеджеры идут на `/objects`
- ✅ Единая логика в обеих страницах входа
- ✅ Все роли учтены

## Коммит

`5b7a835` - Исправление логики редиректа после входа для всех ролей
