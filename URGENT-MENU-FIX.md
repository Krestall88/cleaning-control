# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ú–ï–ù–Æ

**–î–∞—Ç–∞:** 28 –æ–∫—Ç—è–±—Ä—è 2025, 14:55 UTC+3  
**–°—Ç–∞—Ç—É—Å:** –ò–°–ü–†–ê–í–õ–ï–ù–û - –¢–†–ï–ë–£–ï–¢–°–Ø –ü–ï–†–ï–ó–ê–ü–£–°–ö –°–ï–†–í–ï–†–ê  
**–ü—Ä–æ–±–ª–µ–º–∞:** –£ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–æ–ø–∞–ª–æ –ª–µ–≤–æ–µ –º–µ–Ω—é, –æ—Å—Ç–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ "–í—ã—Ö–æ–¥"

## üîç –ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API `/api/auth/me` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –æ–±—ä–µ–∫—Ç–æ–≤, —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –∏–∑–º–µ–Ω–∏–ª—Å—è —Å:
```javascript
// –ë–´–õ–û
{ id, name, email, role }

// –°–¢–ê–õ–û  
{ user: { id, name, email, role } }
```

–ù–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `AppLayout` –∏ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ –æ–∂–∏–¥–∞—Ç—å —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç, –∏–∑-–∑–∞ —á–µ–≥–æ `user` –æ—Å—Ç–∞–≤–∞–ª—Å—è `null` –∏ –º–µ–Ω—é –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å.

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **1. AppLayout.tsx** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–µ–Ω—é
```javascript
// –ë–´–õ–û
const userData = await response.json();
setUser(userData);

// –°–¢–ê–õ–û
const data = await response.json();
setUser(data.user);
```

### **2. admin/layout.tsx** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∞–¥–º–∏–Ω–∫–∏
```javascript
// –ë–´–õ–û
const userData = await response.json();
if (userData.role !== 'ADMIN') {
  setUser(userData);

// –°–¢–ê–õ–û
const data = await response.json();
if (data.user.role !== 'ADMIN') {
  setUser(data.user);
```

### **3. AdditionalTasksClientPage.tsx** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏
```javascript
// –ë–´–õ–û
const userData = await response.json();
setCurrentUser(userData);

// –°–¢–ê–õ–û
const data = await response.json();
setCurrentUser(data.user);
```

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### **API —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ `/api/auth/me` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ user: {...} }`
- ‚úÖ –ê–¥–º–∏–Ω: `role: ADMIN`, `name: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä`
- ‚úÖ –ú–µ–Ω–µ–¥–∂–µ—Ä: `role: MANAGER`, `name: –®–æ–¥–∏–µ–≤–∞ –ú—É—Ö–∞—Ä–∞–º(–ì—É–ª—è) –î–∂—É—Ä–∞–µ–≤–Ω–∞`

### **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω:**
- ‚úÖ `AppLayout` –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ API

## üîÑ –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø –ú–ï–ù–Æ

### **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –í–´–ü–û–õ–ù–ò–¢–¨:**

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
   ```bash
   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
   # –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
   npm run dev
   # –∏–ª–∏
   yarn dev
   ```

2. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –ù–∞–∂–º–∏—Ç–µ `Ctrl+Shift+R` (–∂–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)
   - –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Storage ‚Üí Clear storage

3. **–ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å:**
   - –í—ã–π–¥–∏—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
   - –í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ –ø–æ–¥ –ª—é–±–æ–π —Ä–æ–ª—å—é

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ª–µ–≤–æ–µ –º–µ–Ω—é —Å –ø—É–Ω–∫—Ç–∞–º–∏:
- üè† –ì–ª–∞–≤–Ω–∞—è
- üè¢ –û–±—ä–µ–∫—Ç—ã  
- ‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)
- üë• –ú–µ–Ω–µ–¥–∂–µ—Ä—ã
- üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å
- üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏
- üì∏ –§–æ—Ç–æ–æ—Ç—á–µ—Ç—ã
- üìä –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
- üì¶ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üö® –ï–°–õ–ò –ú–ï–ù–Æ –í–°–ï –ï–©–ï –ù–ï –ü–û–Ø–í–ò–õ–û–°–¨

### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
   - –í–∫–ª–∞–¥–∫–∞ Console
   - –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ JavaScript

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network:**
   - DevTools ‚Üí Network
   - –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/auth/me`
   - –î–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `{ user: {...} }`

3. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:**
   ```bash
   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
   # –£–¥–∞–ª–∏—Ç–µ –∫—ç—à Next.js
   rm -rf .next
   # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
   npm run dev
   ```

## üìã –ó–ê–¢–†–û–ù–£–¢–´–ï –§–ê–ô–õ–´

- ‚úÖ `src/components/AppLayout.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é
- ‚úÖ `src/app/admin/layout.tsx` - –∞–¥–º–∏–Ω–∫–∞
- ‚úÖ `src/app/additional-tasks/AdditionalTasksClientPage.tsx` - –¥–æ–ø. –∑–∞–¥–∞—á–∏
- ‚úÖ `src/app/objects/ObjectsClientPage.tsx` - —É–∂–µ –±—ã–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- ‚úÖ `src/app/objects/[id]/ObjectDetailClientPage.tsx` - —É–∂–µ –±—ã–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω

## ‚ö†Ô∏è –í–ê–ñ–ù–û

–≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è, —Ç–∞–∫ –∫–∞–∫ –±–µ–∑ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –Ω–∞–≤–∏–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å–∏—Å—Ç–µ–º–µ. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å API:**
–¢–µ–ø–µ—Ä—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
```javascript
const response = await fetch('/api/auth/me');
const data = await response.json();
const user = data.user; // –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ –≤–µ–∑–¥–µ
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–¥–µ:**
–í—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `/api/auth/me`, —Ç–µ–ø–µ—Ä—å –æ–∂–∏–¥–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É `{ user: {...} }`.

**–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´ - –¢–†–ï–ë–£–ï–¢–°–Ø –¢–û–õ–¨–ö–û –ü–ï–†–ï–ó–ê–ü–£–°–ö –°–ï–†–í–ï–†–ê!** üöÄ
