# üîç –û—Ç–ª–∞–¥–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

### ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

#### 1. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?**

```bash
npx prisma db push
npx prisma generate
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- –ü–æ–ª–µ `telegramId` –¥–æ–ª–∂–Ω–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ `User`
- –ë–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–≤—è–∑–∫–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ

#### 2. **–ü—Ä–∏–≤—è–∑–∞–Ω –ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä –∫ Telegram?**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
```sql
SELECT id, name, email, telegramId 
FROM "User" 
WHERE email = 'email_–º–µ–Ω–µ–¥–∂–µ—Ä–∞';
```

–ò–ª–∏ —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/telegram`:
- –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "üîî –ú–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–æ "‚úÖ Telegram –ø—Ä–∏–≤—è–∑–∞–Ω"

#### 3. **–ù–∞–∑–Ω–∞—á–µ–Ω –ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞ –æ–±—ä–µ–∫—Ç?**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```sql
SELECT id, name, managerId 
FROM "CleaningObject" 
WHERE name = '–ù–µ–∫—Ç–∞—Ä';
```

–ï—Å–ª–∏ `managerId` = `null`, —Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è!

#### 4. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É–∫–∞–∑–∞–Ω TELEGRAM_BOT_TOKEN?**

–í —Ñ–∞–π–ª–µ `.env`:
```env
TELEGRAM_BOT_TOKEN=8262421888:AAHBJ5lt_MHJqwmyhtq9UAK9wU2veLgTVlQ
```

#### 5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞**

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ: [task_id]
üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É: [–∏–º—è_–º–µ–Ω–µ–¥–∂–µ—Ä–∞]
```

–ò–ª–∏:
```
‚ÑπÔ∏è –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –ø—Ä–∏–≤—è–∑–∞–ª Telegram, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
```

---

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏

1. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –∞–∫–∫–∞—É–Ω—Ç–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞
2. –û—Ç–∫—Ä–æ–π—Ç–µ `/telegram`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–≤—è–∑–∫–∏

**–ï—Å–ª–∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω:**
- –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–≤—è–∑–∞—Ç—å Telegram"
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/bind –ö–û–î` –±–æ—Ç—É
- –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–±—ä–µ–∫—Ç–∞ "–ù–µ–∫—Ç–∞—Ä"
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–∞–∑–Ω–∞—á–µ–Ω –ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä
3. –ï—Å–ª–∏ –Ω–µ—Ç - –Ω–∞–∑–Ω–∞—á—å—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞

### –®–∞–≥ 3: –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è

1. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –∞–¥–º–∏–Ω–æ–º
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –æ–±—ä–µ–∫—Ç "–ù–µ–∫—Ç–∞—Ä"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram –º–µ–Ω–µ–¥–∂–µ—Ä–∞

---

## üìä –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –£—Å–ø–µ—à–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞:
```
‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ: cly1234567890
üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –º–µ–Ω–µ–¥–∂–µ—Ä—É: –ë–æ–±—Ä–æ–≤—Å–∫–∞—è –ï–ª–µ–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–Ω–∞
‚úÖ Telegram —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 123456789
```

### –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω:
```
‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ: cly1234567890
‚ÑπÔ∏è –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –ø—Ä–∏–≤—è–∑–∞–ª Telegram, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
```

### –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:
```
‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ: cly1234567890
‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: [—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏]
```

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. "–ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–µ –ø—Ä–∏–≤—è–∑–∞–ª Telegram"

**–ü—Ä–∏—á–∏–Ω–∞:** `telegramId` –≤ –±–∞–∑–µ = `null`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è
2. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–Ω–æ–≤–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å Telegram
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ –ø—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ

### 2. "Forbidden: bot was blocked by the user"

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞
2. –û—Ç–≤—è–∑–∞—Ç—å –∏ –∑–∞–Ω–æ–≤–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å Telegram

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç, –Ω–æ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—Ö

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `telegramId`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `telegramId` –≤ –±–∞–∑–µ
2. –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –æ—Ç–≤—è–∑–∞—Ç—å –∏ –∑–∞–Ω–æ–≤–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å
3. –ü—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ –±–æ—Ç –ø–æ–ª—É—á–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID

### 4. "TELEGRAM_BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –∑–∞–¥–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```env
   TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
   ```
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä–∏–≤—è–∑–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
1. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
2. –û—Ç–∫—Ä–æ–π—Ç–µ `/telegram`
3. –ü—Ä–∏–≤—è–∂–∏—Ç–µ Telegram
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ: `telegramId` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω

### –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∞
1. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –∞–¥–º–∏–Ω–æ–º
2. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –æ–±—ä–µ–∫—Ç —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram –º–µ–Ω–µ–¥–∂–µ—Ä–∞

### –¢–µ—Å—Ç 3: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (–æ—Ç –∫–ª–∏–µ–Ω—Ç–∞)
1. –ü—Ä–∏–≤—è–∂–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞ –∫ –æ–±—ä–µ–∫—Ç—É
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É –æ—Ç –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–¥–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `npx prisma db push`
- [ ] –û–±–Ω–æ–≤–ª—ë–Ω Prisma Client `npx prisma generate`
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω dev —Å–µ—Ä–≤–µ—Ä
- [ ] –í `.env` —É–∫–∞–∑–∞–Ω `TELEGRAM_BOT_TOKEN`
- [ ] –í `.env` —É–∫–∞–∑–∞–Ω `TELEGRAM_BOT_USERNAME`
- [ ] –í `.env` —É–∫–∞–∑–∞–Ω `NEXT_PUBLIC_APP_URL`
- [ ] –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–∏–≤—è–∑–∞–ª —Å–≤–æ–π Telegram
- [ ] –ú–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –æ–±—ä–µ–∫—Ç
- [ ] –ë–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –ø—É–Ω–∫—Ç—ã —á–µ–∫–ª–∏—Å—Ç–∞
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É `/start`)
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
