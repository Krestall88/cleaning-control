# ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Browser Notifications

## üìä –ê–Ω–∞–ª–∏–∑ –Ω–∞–≥—Ä—É–∑–∫–∏

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:
- ‚úÖ Polling **–£–ñ–ï –†–ê–ë–û–¢–ê–ï–¢** –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ù–∏–∫–∞–∫–æ–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø—Ä–æ–≤–µ—Ä–∫–∞–º

### –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:

**–£–º–Ω—ã–π –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π polling:**

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –ò–Ω—Ç–µ—Ä–≤–∞–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|----------|
| **–í–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞** | 30 —Å–µ–∫—É–Ω–¥ | –ë—ã—Å—Ç—Ä—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| **–í–∫–ª–∞–¥–∫–∞ –≤ —Ñ–æ–Ω–µ** | 60 —Å–µ–∫—É–Ω–¥ | –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ |
| **–ù–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å > 5 –º–∏–Ω—É—Ç** | –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω | –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ |
| **–í–æ–∑–≤—Ä–∞—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** | 30 —Å–µ–∫—É–Ω–¥ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ |

---

## üîã –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

### 1. **–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**

**–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥** (–±—ã–ª):
```typescript
// –ó–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï –∑–∞–¥–∞–Ω–∏—è
GET /api/additional-tasks
// –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞: ~50-200 KB
```

**–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥**:
```typescript
// –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—á–µ—Ç—á–∏–∫–∏
GET /api/notifications/unread?lastCheck=2024-01-01T12:00:00Z
// –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞: ~1-2 KB (–≤ 50-100 —Ä–∞–∑ –º–µ–Ω—å—à–µ!)
```

### 2. **–£–º–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞**

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω > 5 –º–∏–Ω—É—Ç
- –ë—Ä–∞—É–∑–µ—Ä –∑–∞–∫—Ä—ã—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—à–µ–ª –∏–∑ —Å–∏—Å—Ç–µ–º—ã

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ–≥–¥–∞:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω—É–ª—Å—è
- –ö–ª–∏–∫–Ω—É–ª –º—ã—à–∫–æ–π
- –ù–∞–∂–∞–ª –∫–ª–∞–≤–∏—à—É
```

### 3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª**

```typescript
// –í–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ ‚Üí 30 —Å–µ–∫
if (document.visibilityState === 'visible') {
  interval = 30000;
}

// –í–∫–ª–∞–¥–∫–∞ –≤ —Ñ–æ–Ω–µ ‚Üí 60 —Å–µ–∫ (–≤ 2 —Ä–∞–∑–∞ —Ä–µ–∂–µ!)
else {
  interval = 60000;
}
```

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (8 —á–∞—Å–æ–≤)

**–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ó–∞–ø—Ä–æ—Å–æ–≤: 960 (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)
- –¢—Ä–∞—Ñ–∏–∫: ~96 MB (–ø–æ 100 KB –Ω–∞ –∑–∞–ø—Ä–æ—Å)

**–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:**
- –ó–∞–ø—Ä–æ—Å–æ–≤: 960 (—Ç–æ –∂–µ —Å–∞–º–æ–µ)
- –¢—Ä–∞—Ñ–∏–∫: ~2 MB (–ø–æ 2 KB –Ω–∞ –∑–∞–ø—Ä–æ—Å) ‚úÖ **–í 48 —Ä–∞–∑ –º–µ–Ω—å—à–µ!**

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í–∫–ª–∞–¥–∫–∞ –≤ —Ñ–æ–Ω–µ (8 —á–∞—Å–æ–≤)

**–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ó–∞–ø—Ä–æ—Å–æ–≤: 960
- –¢—Ä–∞—Ñ–∏–∫: ~96 MB

**–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:**
- –ó–∞–ø—Ä–æ—Å–æ–≤: 480 (–∫–∞–∂–¥—ã–µ 60 —Å–µ–∫) ‚úÖ **–í 2 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ!**
- –¢—Ä–∞—Ñ–∏–∫: ~1 MB ‚úÖ **–í 96 —Ä–∞–∑ –º–µ–Ω—å—à–µ!**

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (8 —á–∞—Å–æ–≤)

**–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ó–∞–ø—Ä–æ—Å–æ–≤: 960
- –¢—Ä–∞—Ñ–∏–∫: ~96 MB

**–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:**
- –ó–∞–ø—Ä–æ—Å–æ–≤: 10 (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 5 –º–∏–Ω—É—Ç)
- –¢—Ä–∞—Ñ–∏–∫: ~20 KB ‚úÖ **–í 4800 —Ä–∞–∑ –º–µ–Ω—å—à–µ!**

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–±–æ–µ–≤

### 1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

```typescript
try {
  await checkNotifications();
} catch (error) {
  console.error('Error:', error);
  // Polling –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
  // –°–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–≤–∞–ª
}
```

### 2. **–¢–∞–π–º–∞—É—Ç—ã**

```typescript
// –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –∑–∞–≤–∏—Å - –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ
const controller = new AbortController();
const timeout = setTimeout(() => controller.abort(), 10000);

fetch(url, { signal: controller.signal });
```

### 3. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**

```typescript
// –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–≤–∞–∂–¥—ã
const tag = `task-${taskId}`;
new Notification(title, { tag }); // –ó–∞–º–µ–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å —Ç–∞–∫–∏–º –∂–µ tag
```

---

## üéØ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã:

```typescript
{
  activeInterval: 30000,      // 30 —Å–µ–∫ - –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–≥—Ä—É–∑–∫–æ–π
  backgroundInterval: 60000,   // 60 —Å–µ–∫ - —ç–∫–æ–Ω–æ–º–∏—è –∫–æ–≥–¥–∞ –Ω–µ —Å–º–æ—Ç—Ä—è—Ç
  inactivityTimeout: 300000,   // 5 –º–∏–Ω—É—Ç - —Ä–∞–∑—É–º–Ω—ã–π –ø–æ—Ä–æ–≥ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
}
```

### –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è?

**30 —Å–µ–∫—É–Ω–¥ (–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞):**
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –ù–µ —Å–æ–∑–¥–∞–µ—Ç –æ—â—É—â–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**60 —Å–µ–∫—É–Ω–¥ (—Ñ–æ–Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞):**
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–∏–¥—É—Ç
- ‚úÖ –í 2 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è –±–∞—Ç–∞—Ä–µ–∏ –Ω–∞ –Ω–æ—É—Ç–±—É–∫–∞—Ö

**5 –º–∏–Ω—É—Ç (–Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å):**
- ‚úÖ –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—à–µ–ª - –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

---

## üì± –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Telegram

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Telegram | Browser Notifications |
|----------|----------|----------------------|
| **–†–∞–±–æ—Ç–∞–µ—Ç –∫–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä –∑–∞–∫—Ä—ã—Ç** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–†–∞–±–æ—Ç–∞–µ—Ç –∫–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä —Å–≤–µ—Ä–Ω—É—Ç** | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ** | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä** | 0 (push) | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (polling) |
| **–¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö** | ‚úÖ –î–∞ | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ |

**–í—ã–≤–æ–¥:** Telegram –∏ Browser Notifications **–¥–æ–ø–æ–ª–Ω—è—é—Ç** –¥—Ä—É–≥ –¥—Ä—É–≥–∞!

---

## üîß –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏

### –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:

```
üëÅÔ∏è –í–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ - —É—Å–∫–æ—Ä—è–µ–º polling
üëÅÔ∏è‚Äçüó®Ô∏è –í–∫–ª–∞–¥–∫–∞ –≤ —Ñ–æ–Ω–µ - –∑–∞–º–µ–¥–ª—è–µ–º polling
‚è∏Ô∏è Polling –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–∑-–∑–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
‚ñ∂Ô∏è Polling –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ DevTools:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Network tab
2. –§–∏–ª—å—Ç—Ä: `notifications/unread`
3. –°–º–æ—Ç—Ä–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏**
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π polling
   - –¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

2. **–£–º–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è**
   - –ó–∞–º–µ–¥–ª—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫**
   - –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (1-2 KB)
   - –í 50-100 —Ä–∞–∑ –º–µ–Ω—å—à–µ —á–µ–º —Ä–∞–Ω—å—à–µ

4. **–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–±–æ–µ–≤**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –¢–∞–π–º–∞—É—Ç—ã
   - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

5. **–≠–∫–æ–Ω–æ–º–∏—è –±–∞—Ç–∞—Ä–µ–∏**
   - –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ = –º–µ–Ω—å—à–µ —Ä–∞—Å—Ö–æ–¥
   - –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è –Ω–æ—É—Ç–±—É–∫–æ–≤

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ!** üöÄ
