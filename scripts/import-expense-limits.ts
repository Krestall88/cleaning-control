import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

// ÐœÐ°Ð¿Ð¿Ð¸Ð½Ð³ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ð¹ ÑÑ‚Ð°Ñ‚ÐµÐ¹ Ð¸Ð· Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð² Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ Ð² Ð‘Ð”
const categoryMapping: { [key: string]: string } = {
  'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ,Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸',
  'Ð¢ÐµÐ»ÐµÐ¶ÐºÐ¸': 'Ð¢ÐµÐ»ÐµÐ¶ÐºÐ¸',
  'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°',
  'ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ° Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 'ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ° Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ',
  'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ',
  'ÐœÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¸Ðµ ÐºÐ½Ð¸Ð¶ÐºÐ¸': 'ÐœÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¸Ðµ ÐºÐ½Ð¸Ð¶ÐºÐ¸',
  'Ð“Ð¡Ðœ': 'Ð“Ð¡Ðœ',
  'Ð’Ñ‹Ð·Ð¾Ð² Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ¸ Ð² Ð·Ð¸Ð¼Ð½Ð¸Ð¹ Ð¿ÐµÑ€Ð¸Ð¾Ð´': 'Ð’Ñ‹Ð·Ð¾Ð² Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ¸ Ð² Ð·Ð¸Ð¼Ð½Ð¸Ð¹ Ð¿ÐµÑ€Ð¸Ð¾Ð´',
  'Ð ÐµÐ°Ð³ÐµÐ½Ñ‚Ñ‹': 'Ð ÐµÐ°Ð³ÐµÐ½Ñ‚Ñ‹',
  'Ð”Ð¸ÑÐ¿ÐµÐ½ÑÐµÑ€Ñ‹': 'Ð”Ð¸ÑÐ¿ÐµÐ½ÑÐµÑ€Ñ‹'
};

interface LimitData {
  objectName: string;
  limits: { [category: string]: number };
}

const limitsData: LimitData[] = [
  {
    objectName: 'Â«Ð–ÐµÐ»Ð´Ð¾Ñ€Ð¿Ñ€Ð¾ÐµÐºÑ‚ ÐŸÐ¾Ð²Ð¾Ð»Ð¶ÑŒÑÂ» - Ñ„Ð¸Ð»Ð¸Ð°Ð»Ð° ÐÐž Â«Ð Ð¾ÑÐ¶ÐµÐ»Ð´Ð¾Ñ€Ð¿Ñ€Ð¾ÐµÐºÑ‚Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 19000,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 666,
      'Ð“Ð¡Ðœ': 1500,
      'Ð’Ñ‹Ð·Ð¾Ð² Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ¸ Ð² Ð·Ð¸Ð¼Ð½Ð¸Ð¹ Ð¿ÐµÑ€Ð¸Ð¾Ð´': 12500
    }
  },
  {
    objectName: 'ÐÐž "Ð¢ÑÐ¶Ð¼Ð°Ñˆ"',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 55900,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 3793,
      'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 3000,
      'Ð“Ð¡Ðœ': 6500
    }
  },
  {
    objectName: 'ÐÐž Â«Ð“Ðš Â«Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ñ‰Ð¸Ñ‚Â» -Ð¢Ðœ Ð¡Ð°Ð¼Ð°Ñ€Ð°Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 272000,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 14770,
      'ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ° Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 7000,
      'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 50000,
      'Ð“Ð¡Ðœ': 4000
    }
  },
  {
    objectName: 'Ð—ÐÐž  Â«Ð¡Ð‘ÐšÐšÂ»',
    limits: {
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 3808.33,
      'ÐœÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¸Ðµ ÐºÐ½Ð¸Ð¶ÐºÐ¸': 4500,
      'Ð“Ð¡Ðœ': 1000
    }
  },
  {
    objectName: 'Ð˜ÐŸ Ð¨Ð¸Ñ€Ð¾ÐºÐ¾Ð² Ð”Ð¼Ð¸Ñ‚Ñ€Ð¸Ð¹ Ð’Ð»Ð°Ð´Ð¸Ð¼Ð¸Ñ€Ð¾Ð²Ð¸Ñ‡ (Ð°Ð²Ñ‚Ð¾ÑÐµÑ€Ð²Ð¸Ñ)',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 1500,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 416.67,
      'Ð“Ð¡Ðœ': 1000
    }
  },
  {
    objectName: 'ÐœÐ‘Ð£ Â«Ð›Ð¾Ð¿Ð°Ñ‚Ð¸Ð½ÑÐºÐ¾ÐµÂ»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 1500,
      'Ð“Ð¡Ðœ': 2000
    }
  },
  {
    objectName: 'ÐžÐÐž "Ð¡Ð°Ð¼Ð°Ñ€ÑÐºÐ¸Ð¹ Ñ…Ð»ÐµÐ±Ð¾Ð·Ð°Ð²Ð¾Ð´ â„–5"',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 35000,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 2000,
      'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 21000
    }
  },
  {
    objectName: 'ÐžÐžÐž "42"',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 350
    }
  },
  {
    objectName: 'ÐžÐžÐž "Ð–Ð¸Ð»Ð­Ð½ÐµÑ€Ð³Ð¾" Ð¸ ÐžÐžÐž "Ð–Ð­Ð£-66" (Ð–Ðš Ð­ÐºÐ¾-Ð“Ñ€Ð°Ð´ Ð’Ð¾Ð»Ð³Ð°Ñ€ÑŒ)',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 41432,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 7000
    }
  },
  {
    objectName: 'ÐžÐžÐž "ÐœÐµÐ´Ð¸Ñ†Ð¸Ð½Ð°-ÐÐ»ÑŒÑ„Ð°Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ð²Ð°Ð½Ð¸Ñ" (ÐžÐžÐž "ÐœÐµÐ´ÐÐ¡)',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 1133.33,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 283.33
    }
  },
  {
    objectName: 'ÐžÐžÐž "ÐŸÐš Ð¤Ð°Ð±Ñ€Ð¸ÐºÐ° ÐšÐ°Ñ‡ÐµÑÑ‚Ð²Ð°"',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 59600,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 7500,
      'ÐœÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¸Ðµ ÐºÐ½Ð¸Ð¶ÐºÐ¸': 3000,
      'Ð“Ð¡Ðœ': 3000
    }
  },
  {
    objectName: 'ÐžÐžÐž "Ð£Ðš Ð‘Ð˜Ð“-Ð‘Ð•Ð"',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 5700,
      'Ð¢ÐµÐ»ÐµÐ¶ÐºÐ¸': 1283.33,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 600,
      'Ð“Ð¡Ðœ': 500
    }
  },
  {
    objectName: 'ÐžÐžÐž "Ð¤Ð›ÐÐ“ÐœÐÐ"',
    limits: {
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 300,
      'Ð“Ð¡Ðœ': 500
    }
  },
  {
    objectName: 'ÐžÐžÐž "Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ñ‰Ð¸Ñ‚-Ð˜Ð½Ð¶Ð¸Ð½Ð¸Ñ€Ð¸Ð½Ð³"',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 7650,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 333.33,
      'Ð“Ð¡Ðœ': 1000,
      'Ð”Ð¸ÑÐ¿ÐµÐ½ÑÐµÑ€Ñ‹': 7800
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«ÐÐ»ÑŒÑ„Ð°Â» (Ð¢Ð¦ ÐœÐµÐ»Ð¾Ð´Ð¸Ñ)',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 5500,
      'Ð¢ÐµÐ»ÐµÐ¶ÐºÐ¸': 666.67,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 333.33
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«Ð‘Ð¦ Â«Ð¡Ñ„ÐµÑ€Ð°Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 5000,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 1250,
      'Ð“Ð¡Ðœ': 3000,
      'Ð’Ñ‹Ð·Ð¾Ð² Ñ‚ÐµÑ…Ð½Ð¸ÐºÐ¸ Ð² Ð·Ð¸Ð¼Ð½Ð¸Ð¹ Ð¿ÐµÑ€Ð¸Ð¾Ð´': 3000,
      'Ð ÐµÐ°Ð³ÐµÐ½Ñ‚Ñ‹': 5000
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«Ð•Ð´Ð¸Ð½Ñ‹Ðµ Ð¢Ñ€Ð°Ð½ÑÐ¿Ð¾Ñ€Ñ‚Ð½Ñ‹Ðµ Ð­Ð½ÐµÑ€Ð³Ð¾Ð¡Ð¸ÑÑ‚ÐµÐ¼Ñ‹Â» (ÐžÐžÐž Â«Ð•Ð¢Ð­Ð¡Â»)',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 7500,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 500,
      'Ð“Ð¡Ðœ': 1500
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«Ð˜Ð½ÐºÐ°Ñ‚ÐµÑ…Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 74460,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 8730.66,
      'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 3000,
      'Ð“Ð¡Ðœ': 7000
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«ÐœÐ°Ñ€ÐºÐµÑ‚.ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¸Â» (Ð¯Ð½Ð´ÐµÐºÑ)',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 14000,
      'Ð¢ÐµÐ»ÐµÐ¶ÐºÐ¸': 2566.67,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 5166.67,
      'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 25000
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«ÐÐµÐºÑ‚Ð°Ñ€Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 10000,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 5266.67,
      'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 5900,
      'ÐœÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¸Ðµ ÐºÐ½Ð¸Ð¶ÐºÐ¸': 1167,
      'Ð“Ð¡Ðœ': 6000
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«ÐÐ› ÐšÐ¾Ð½Ñ‚Ð¸Ð½ÐµÐ½Ñ‚Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 500
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«ÐŸÐµÐ¿ÑÐ¸ÐšÐ¾ Ð¥Ð¾Ð»Ð´Ð¸Ð½Ð³ÑÂ»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 50000,
      'Ð¢ÐµÐ»ÐµÐ¶ÐºÐ¸': 4660,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 30000,
      'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 40000,
      'Ð“Ð¡Ðœ': 18000
    }
  },
  {
    objectName: 'ÐžÐžÐž Â«Ð£Ðš Â«ÐÐ¼Ð¾Ð½Ð´-Ð–Ð¸Ð»ÐšÐ¾Ð¼Ð¡ÐµÑ€Ð²Ð¸ÑÂ»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 11200,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 2500,
      'Ð“Ð¡Ðœ': 1500
    }
  },
  {
    objectName: 'ÐžÐžÐž Ð§ÐžÐž Â«Ð“Ð²Ð°Ñ€Ð´ÐµÐµÑ†Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 1500
    }
  },
  {
    objectName: 'ÐŸÐÐž "Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ð‘Ð°Ð½Ðº"',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 500
    }
  },
  {
    objectName: 'ÐŸÐÐž Â«Ð¡Ð°Ð¼Ð°Ñ€Ð°ÑÐ½ÐµÑ€Ð³Ð¾Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 3500,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 166,
      'Ð“Ð¡Ðœ': 500
    }
  },
  {
    objectName: 'Ð¢Ð¡Ð– "Ð¡Ð¿Ð°Ñ€Ñ‚Ð°Ðº"',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 500
    }
  },
  {
    objectName: 'Ð£Ð¤ÐŸÐ¡Ðž ÑÐ°Ð½Ð°Ñ‚Ð¾Ñ€Ð¸Ð¹ Â«ÐšÑ€Ð°ÑÐ½Ð°Ñ Ð“Ð»Ð¸Ð½ÐºÐ°Â»',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 1700,
      'Ð¡Ð¿ÐµÑ†Ð¾Ð´ÐµÐ¶Ð´Ð°': 133,
      'Ð“Ð¡Ðœ': 500
    }
  },
  {
    objectName: 'Ð¤Ð“Ð‘ÐžÐ£ Ð’Ðž Ð¡Ð°Ð¼Ð“ÐœÐ£ ÐœÐ¸Ð½Ð·Ð´Ñ€Ð°Ð²Ð° Ð Ð¾ÑÑÐ¸Ð¸',
    limits: {
      'Ð¥Ð¸Ð¼Ð¸Ñ,Ð¸Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ, Ñ€Ð°ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸': 50000,
      'Ð ÐµÐ¼Ð¾Ð½Ñ‚ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ': 7000,
      'Ð“Ð¡Ðœ': 6000,
      'Ð”Ð¸ÑÐ¿ÐµÐ½ÑÐµÑ€Ñ‹': 244100
    }
  }
];

async function main() {
  console.log('ðŸš€ ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð»Ð¸Ð¼Ð¸Ñ‚Ð¾Ð² Ð¿Ð¾ ÑÑ‚Ð°Ñ‚ÑŒÑÐ¼...\n');
  
  let success = 0;
  let failed = 0;
  const errors: string[] = [];
  
  // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð³Ð¾Ð´ Ð¸ Ð¼ÐµÑÑÑ†
  const currentYear = new Date().getFullYear();
  const currentMonth = new Date().getMonth() + 1;
  
  // ÐÐ°Ñ…Ð¾Ð´Ð¸Ð¼ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð°Ð´Ð¼Ð¸Ð½Ð° Ð´Ð»Ñ setById
  const admin = await prisma.user.findFirst({
    where: { role: 'ADMIN' }
  });
  
  if (!admin) {
    console.error('âŒ ÐÐµ Ð½Ð°Ð¹Ð´ÐµÐ½ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ñ Ñ€Ð¾Ð»ÑŒÑŽ ADMIN');
    return;
  }
  
  for (const data of limitsData) {
    try {
      // Ð˜Ñ‰ÐµÐ¼ Ð¾Ð±ÑŠÐµÐºÑ‚
      const object = await prisma.cleaningObject.findFirst({
        where: {
          name: { contains: data.objectName, mode: 'insensitive' }
        }
      });
      
      if (!object) {
        errors.push(`âŒ ÐžÐ±ÑŠÐµÐºÑ‚ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½: ${data.objectName}`);
        failed++;
        continue;
      }
      
      // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÑ‚Ð°Ñ‚ÑŒÐ¸
      for (const [categoryName, amount] of Object.entries(data.limits)) {
        if (amount === 0) continue; // ÐŸÑ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð½ÑƒÐ»ÐµÐ²Ñ‹Ðµ Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹
        
        const dbCategoryName = categoryMapping[categoryName] || categoryName;
        
        // Ð˜Ñ‰ÐµÐ¼ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ
        const category = await prisma.expenseCategory.findFirst({
          where: {
            name: { equals: dbCategoryName, mode: 'insensitive' }
          }
        });
        
        if (!category) {
          errors.push(`âš ï¸  ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð°: ${dbCategoryName} Ð´Ð»Ñ ${data.objectName}`);
          continue;
        }
        
        // ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÐµÑÑ‚ÑŒ Ð»Ð¸ ÑƒÐ¶Ðµ Ð»Ð¸Ð¼Ð¸Ñ‚
        const existingLimit = await prisma.expenseCategoryLimit.findFirst({
          where: {
            objectId: object.id,
            categoryId: category.id,
            year: currentYear,
            month: currentMonth,
            periodType: 'MONTHLY'
          }
        });
        
        if (existingLimit) {
          // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ Ð»Ð¸Ð¼Ð¸Ñ‚
          await prisma.expenseCategoryLimit.update({
            where: { id: existingLimit.id },
            data: { amount }
          });
          console.log(`âœ… ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½: ${object.name} â†’ ${category.name} = ${amount}`);
        } else {
          // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ð¹ Ð»Ð¸Ð¼Ð¸Ñ‚ (Ð¼ÐµÑÑÑ‡Ð½Ñ‹Ð¹)
          await prisma.expenseCategoryLimit.create({
            data: {
              objectId: object.id,
              categoryId: category.id,
              amount,
              year: currentYear,
              month: currentMonth,
              periodType: 'MONTHLY',
              setById: admin.id
            }
          });
          console.log(`âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½: ${object.name} â†’ ${category.name} = ${amount}`);
        }
        
        success++;
      }
      
    } catch (error) {
      errors.push(`âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸: ${data.objectName} - ${error}`);
      failed++;
    }
  }
  
  console.log('\n' + '='.repeat(80));
  console.log(`\nðŸ“Š Ð˜Ð¢ÐžÐ“Ðž:`);
  console.log(`âœ… Ð£ÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½Ð¾/Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ Ð»Ð¸Ð¼Ð¸Ñ‚Ð¾Ð²: ${success}`);
  console.log(`âŒ ÐžÑˆÐ¸Ð±Ð¾Ðº: ${failed}`);
  console.log(`ðŸ“ Ð’ÑÐµÐ³Ð¾ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð²: ${limitsData.length}\n`);
  
  if (errors.length > 0) {
    console.log('âš ï¸  ÐžÐ¨Ð˜Ð‘ÐšÐ˜ Ð˜ ÐŸÐ Ð•Ð”Ð£ÐŸÐ Ð•Ð–Ð”Ð•ÐÐ˜Ð¯:\n');
    errors.forEach(err => console.log(err));
  }
}

main()
  .catch(console.error)
  .finally(() => prisma.$disconnect());
